# ベンダープロフィール表示の修正計画

## 問題点の整理

### ① 会場カテゴリ以外のカテゴリのプランは一切表示されない
**原因**: カテゴリフィルタがベンダーのカテゴリ（`vendor.categories`）でフィルタリングしているが、プロフィールの`categoryType`と一致していない。

**解決策**: プロフィール展開後に、プロフィールの`categoryType`でカテゴリを判定する。

### ② 会場カテゴリに会場ではないカテゴリのものもなぜか多く入っている
**原因**: ベンダーのカテゴリでフィルタリングしているため、ベンダーが複数のカテゴリに属している場合、すべてのカテゴリで表示される。

**解決策**: プロフィールの`categoryType`でフィルタリングする。

### ③ どのプランのカードを押してもデフォルトのプランのカードが表示される
**原因**: 
- `/api/vendors/[id]`が常にデフォルトプロフィールを返している
- カードのリンクが`/vendors/${vendor.id}`になっているが、プロフィールIDが含まれていない

**解決策**: 
- URLにプロフィールIDを含める（`/vendors/[id]?profileId=[profileId]`）
- APIでプロフィールIDを受け取り、該当プロフィールを返す

### ④ トップページでは表示名が出てくるが、プラン詳細ページでは大きく出品者名が出てプラン名が出品者名の位置にいる
**原因**: 詳細ページで屋号が大きく表示され、出品名が小さく表示されている。

**解決策**: 詳細ページの表示順序を修正（出品名を大きく、屋号を小さく）。

### ⑤ トップページにどれもサンプルとかサンプルプランなどデフォルトプランの自己紹介が未だに書いてある
**原因**: シードデータやデフォルトデータが表示されている可能性がある。

**解決策**: 実際のプロフィールデータが表示されるように確認。

## 修正手順

1. **カテゴリフィルタの修正**
   - プロフィール展開後に、プロフィールの`categoryType`でカテゴリを判定
   - カテゴリ名と`categoryType`のマッピングを作成

2. **URL構造の変更**
   - カードのリンクにプロフィールIDを含める
   - 詳細ページでプロフィールIDを受け取る

3. **APIの修正**
   - `/api/vendors/[id]`でプロフィールIDを受け取り、該当プロフィールを返す

4. **表示の修正**
   - 詳細ページで出品名を大きく、屋号を小さく表示
